> 1、 假设某计算机指令长度为 32 位，具有双操作数，单操作数，无操作数三类指令类型，指令系统共有 70 条指令，请设计满足要求的指令格式。

$70$ 条指令至少需要 $70 \leq 2^r, r = 7$ 位操作码，

双操作数：
|OP| 操作数1 | 操作数2 | -|
|:-:|:-:|:-:|:-:|
|31 ~ 25|24 ~ 13|12 ~ 1| 0|

单操作数：
| OP | 操作数1 |
| :-------: | :------: | 
| 31 ~ 25 | 24 ~ 0|

无操作数:
| OP | - |
|:-:|:-:|
|31 ~ 25|24 ~ 0|

> 2、 某计算机字长为 32 位，主存容量为 64KB，采用单字长单地址指令，共有 40 条指令。试采用直接、立即、变址、相对四种寻址方式设计指令格式。

40 条指令，需要 $\lceil \log_240 \rceil = 6$ 位，主存容量为 64KB，则地址需要 $\log_2(64 \times 1024) = 16$ 位，寻址方式有 4 种，需要 $\log_24 = 2$ 种。

|OP|-|寻址方式X|D|
|:-:|:-:|:-:|:-:|
|31 ~ 26|25 ~ 18|17 ~ 16|15 ~ 0|

1. X = 00，直接寻址，由 D 直接给出有效地址，EA = D
2. X = 01，立即寻址，由 D 直接给出操作数 操作数 = D
3. X = 10，变址寻址，由变址寄存器的内容加上 D 给出操作数的有效地址，EA = (IR) + D
4. X = 11，相对寻址，由程序计数器 PC 的内容加上 D 给出操作数的有效地址，A = (PC) + D

> 3、 某机字长为 32 位，主存容量为 1MB，单字长指令，有 50 种操作码，采用寄存器寻址，寄存器间接寻址，立即寻址，直接寻址等方式。CPU 种有 PC，IR，AR，DR 和 16 个通用寄存器，问:

> (1)指令格式如何安排；

50 种操作码需要 $\lceil \log_250 \rceil = 6$ 位，1MB 主存需要 $log_2(1 \times 2^{20}) = 20$ 位地址，4 种寻址方式需要 $log_24 = 2$位，选择 16 种通用寄存器之一作为原操作数或目的操作数需要 $\lceil \log_216 \rceil = 4$ 位

|OP|寻址方式X|寄存器|D|
|:-:|:-:|:-:|:-:|
|31 ~ 26|25 ~ 24|23 ~ 20| 19 ~ 0|

1. X = 00，寄存器寻址，由选中的寄存器直接给出操作数，使用D的4位来选择寄存器
2. X = 01, 寄存器间接寻址，由选中的寄存器给出操作数的有效地址，使用D的4位来选择寄存器
3. X = 10，立即寻址，由 D 直接给出操作数
4. X = 11，直接寻址，由 D 直接给出操作数的有效地址

> (2)能否增加其他寻址方式。

不能，增加寻址方式意味着需要增加1位来表示寻址方式，而当前32位已全部占用，如果减少D的位数，就无法满足直接寻址的位数要求

> 4、某机字长为 32 位，CPU 中有16个32位通用寄存器，设计一种能容纳 64 种操作的指令系统，如果采用通用寄存器作为基址寄存器，则 RS 型指令的最大存储空间是多少。 

需要 $\log_264 = 6$ 位表示操作码，由于是 RS 指令，需要用 $\log_216 = 4$ 位选择寄存器，同时增加一位表示直接寻址或间接寻址，由于使用通用寄存器作基址寄存器，还需要 4 位选中基址寄存器，剩余 18 位形式地址

|OP|原寄存器|I|目的寄存器|D | 
|:-:|:-:|:-:|:-:|:-:|
|31 ~ 26|26 ~ 23|22|21 ~ 18|17 ~ 0|

由于寄存器是 32 位，故最大为 $2^{32}$ 个单元







